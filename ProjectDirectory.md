# iOS-ComponentDevelopment

基本的模块构架
```
    ├── <PrefixHeader>           预编译组件
    ├── <ConnectCore>            中间模块，负责组件间的调度和消息派发。

    ├── <Business>               业务组件
    ├── <BaseFeature>            基础功能组件
    └── <BaseUI>                 基础UI组件
```

<ul>
  <li>
    基础功能组件：（类似于性能统计、Networking、Patch、网络诊断等）
    <ul>
      <li>
        按功能分库，不涉及产品业务需求，跟库Library类似
      </li>
      <li>
        通过良好的接口拱上层业务组件调用；
      </li>
      <li>
        不写入产品定制逻辑，通过扩展接口完成定制；
      </li> 
   </ul>
  </li>
  
  <li>
    基础UI组件：（例如下拉刷新组件、iCausel类似的组件）
    <ul>
      <li>
        产品内通用UI组件；（各个业务模块依赖使用，但需要保持好定制扩展的设计）
      </li>
      <li>
        公共通用UI组件；（不涉及具体产品的视觉设计， 目前较少）
      </li>
   </ul>
  </li>

  <li>
    产品业务组件：（例如圈子、1元购、登录、客服MM等）
    <ul>
      <li>
        业务功能间相对独立，相互间没有Model共享的依赖；
      </li>
      <li>
        业务之间的页面调用只能通过UIBus进行跳转；
      </li>
      <li>
        业务之间的逻辑Action调用只能通过服务提供；
      </li>
   </ul>
  </li>
</ul>

依赖于'ReactiveCocoa'框架的组件间通信，基于'MVVM'的事件分发，构成这一组件开发的基础。

# 关于组件化的思考和总结

#### 1.主要解决本地业务组件之间的通信问题

组件化主要还是解决本地业务组件间的调用，至于跨App或者Hybrid页面通过openUrl方式调用页面和服务的方式其实是可以拆分成两个步骤的问题：

特定模块解析处理＋中间件调用。跨App通过info.plist配置的scheme跳转进入，hybrid页面通过JSBridge框架跳转进入，这部分都有特定的模块去解析完成。

在特定的模块中是否要调用其它业务组件的页面或者服务由特定模块自行决定，这不是组件化中间件要去完成的事情。

#### 2.从工程代码层面来说，组件化就是通过中间件解决组件间头文件直接引用、依赖混乱的问题；

从实际开发来说，组件之间最大的需求就是页面跳转，需要从组件A的pageA1页面跳转到组件B的pageB1页面，避免对组件B页面ViewController头文件的直接依赖。

这里我们希望通过RAC的双向绑定来实现。

#### 3.纯中间件只负责挂接节点的通信问题，不应涉及挂接点具体业务的任何逻辑。

中间件如果涉及到具体的业务逻辑，势必造成中间件对业务模块的直接依赖，所以中间件只需要抽象出业务通信的基本职责，规定好接口，完成调度功能即可。

而每个挂接节点（这里指业务组件）绑定中间件的接口完成挂接工作。

#### 4.中间件是否应该解决组件对外披露服务接口信息？

中间件解决了组件间的通信解藕问题，势必会将组件对外提供调用的信息隐藏起来，不然就不能达到解藕通信的目标。

所以组件对外应当是绝对密封的。

参考自：[iOS组件化思路－大神博客研读和思考](http://www.jianshu.com/p/afb9b52143d4)
